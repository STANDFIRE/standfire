<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <title></title>
  <link rel="stylesheet" media="screen" type="text/css" href="./style.css" />
  <link rel="stylesheet" media="screen" type="text/css" href="./design.css" />
  <link rel="stylesheet" media="print" type="text/css" href="./print.css" />

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<a href=.>start</a>&nbsp;=>&nbsp;<a href=help_en.html>help_en</a>&nbsp;=>&nbsp;<a href=help_en-capsis.html>capsis</a></br>

<h1 class="sectionedit177" id="translation_assistant">Translation assistant</h1>
<div class="level1">

</div>

<h4 id="presentation">Presentation</h4>
<div class="level4">

<p>
The translation assistant can be opened from the dialog boxes by hiting the F2 function key or directly from the menu <code>tools</code>.
</p>

<p>
It makes it possible to create and change the translation lexicons of the application in .properties files. 
</p>

<p>
The translation assistant handles french (_fr) and english (_en).
</p>

<p>
The concerned dialogs are :
</p>
<ul>
<li class="level1"><div class="li"> the Capsis dialogs, </div>
</li>
<li class="level1"><div class="li"> the dialogs of the modules </div>
</li>
<li class="level1"><div class="li"> the dialogs of the extensions. </div>
</li>
</ul>

<p>
The technical dialogs like the Java FileChooser are not concerned.
</p>

<p>
<a href="media/help_en/capsis/extension/generictool/assistant/translationassistant.png" class="media" target="_blank" title="help_en:capsis:extension:generictool:assistant:translationassistant.png"><img src="media/help_en/capsis/extension/generictool/assistant/translationassistant.png" class="mediacenter" title="Translation Assistant" alt="Translation Assistant" /></a>
</p>

<p>
We can find <code>.properties</code> translation files in :
</p>
<ul>
<li class="level1"><div class="li"> The capsis kernel ( eg <code>capsis/Labels_en.properties</code> and <code>_fr</code> )</div>
</li>
<li class="level1"><div class="li"> The capsis modules ( eg <code>pp3/Pp3Labels_en.properties</code> and <code>_fr</code>)</div>
</li>
<li class="level1"><div class="li"> The capsis extension (eg <code>capsis/extension/intervener/DHAThinner_en.properties</code> and <code>_fr</code>)</div>
</li>
</ul>

</div>

<h4 id="how_to_use_the_assistant">How to use the assistant ?</h4>
<div class="level4">

<p>
The translation assistant is a 4 columns table. 
</p>
<ul>
<li class="level1"><div class="li"> The first column contains the keys used in the Java source code of the dialog box. </div>
</li>
<li class="level1"><div class="li"> The two following columns show respectively the translations in french and in english of these keys, as they are known by the Capsis Translator (class Capsis.util.Translator).</div>
</li>
<li class="level1"><div class="li"> The last columns indicates the file where the key is specified.</div>
</li>
</ul>

<p>
Thus, for one dialog, we can find keys from different translation files. We consider that a key should appear in
all the files for the different supported languages (here FR and EN).
</p>

<p>
For example, The lexicon alisier.AlsLabels matches the two files alisier/AlsLabels_fr.properties and alisier/AlsLabels_en.properties. These two file should contain the same tranlsation keys.
</p>

<p>
Once the changes are done, the Save button alters the concerned .properties files and reloads them in the Capsis Translator. The changes will be visible at the next dialog opening.
</p>

</div>

<h4 id="how_the_source_file_is_chosen_for_a_translation">How the source file is chosen for a translation ?</h4>
<div class="level4">

<p>
The list of keys in the first column is made by reading the source code of the dialog box. This way, we are sure that the list in complete (technical note: looking for the keys used in “Translator.swap” occurrences). The translations in the two other columns are obtained by asking the Translator.
</p>

<p>
The keys which translation is just modified are written back in the lexicon where they were found (by asking the Translator).
</p>

<p>
If a translation is not found (in no .properties file), the matching table cell is let empty and the Translator can not give the source lexicon of the key. To find a lexicon for the keys without translations, we process in order this way:
</p>
<ol>
<li class="level1"><div class="li"> look for a direct reference to the lexicon in the source code (technical note: by searching the instruction “Translator.addBundle”), </div>
</li>
<li class="level1"><div class="li"> hypothesize that the dialog is part of a Capsis module and try to get the id card of the module by following the ad hoc naming conventions and if found, ask it the lexicon name (by idCard.getModelBundleBaseName ()), </div>
</li>
<li class="level1"><div class="li"> create a lexicon from the class name and in the same directory (for the extensions for example).</div>
</li>
</ol>

<p>
<em>Note: this detection method makes it possible to translate the keys once the Java source code written without having to open the .properties files with an editor.</em>
</p>

</div>

<h4 id="duplicated_keys">Duplicated keys</h4>
<div class="level4">

<p>
When saving modification, The translation Assistant will check if a key is declared several times in different <code>.properties</code> file. If it is the case, it will ask to remove those duplicated entry. By answering <code>yes</code>, all
the other found key will be deleted. 
</p>

</div>

<h4 id="svn_user">SVN user</h4>
<div class="level4">

<p>
When a lexicon is created, it must be added and commited in SVN. When a lexicon is changed, it must also be commited in SVN. Take care to commit only the lexicons of your own (e.g.: your module / extensions).
</p>

</div>
</body>
</html>
